(function(){let e,t,n=this,r=n.document,i=r.body||r.head,a=i.querySelector("iframe#sleeknote");a?e=a.contentWindow:(i.insertAdjacentHTML("beforeend",'<iframe id=sleeknote style="display:none!important" aria-hidden="true"></iframe>'),e=i.lastElementChild.contentWindow),t=r.currentScript.src.substr(0,r.currentScript.src.lastIndexOf("/")+1);let s="";if(!t.includes("local.sleeknote.com")){let e=r.currentScript.src.split("/").pop().split(".")[0];s=(e.split("-")[1]||"production")+"/"}let o=new e.URL(n.location),l=new e.URLSearchParams(o.search);if(l.has("snhide"))return;let c=r.currentScript.src.split("#")[1]||"SleekNote",u=l.has("snlocal")||e.local,d=l.get("snbranch");if(u||d){let t=r.createElement("script");return t.charset="utf-8",u?(l.delete("snlocal"),t.src="https://local.sleeknote.com",e.local=!0):(l.delete("snbranch"),t.src="https://core-branches.sleeknote.com/branch-"+d),n.history.replaceState(null,null,r.location.origin+r.location.pathname+"?"+l.toString()),t.src+="/frontend2/core.js#"+c,r.head.appendChild(t),void e.frameElement.parentElement.removeChild(e.frameElement)}let m,f=!0;function p(e){e=e.map((e=>(e.NS=c,e))),n.sndefine.SleekNotes.splice(0,0,...e)}if(n.sndefine)f=!1,n.sndefine.namespaces.add(c);else{let i=Object.create(null),a=Object.create(null);function h(n){let o=e.Promise.resolve();return i[n]||(o=new e.Promise(((e,i)=>{if(a[n])a[n].resolve.push(e),a[n].reject.push(i);else{a[n]={resolve:[e],reject:[i]};let o=r.createElement("script");o.src=t+s+(~n.indexOf(".js")?n:n+".js"),o.name=n,o.async=!0,o.charset="utf-8",r.head.appendChild(o),o.onload=function(){a[n].resolve.forEach((e=>{e()}))},o.onerror=function(e){throw a[n].reject.forEach((e=>{e()})),new Error("Error loading: "+e.currentTarget.src)}}}))),o.then((()=>i[n]))}function g(...t){var a="string"==typeof t[0]?t.shift():r.currentScript.name,s=Array.isArray(t[0])?t.shift():[],o=t[0];i[a]||(i[a]=e.Promise.resolve().then((()=>e.Promise.all(s.map(h)).then((e=>o.apply(n,e))))))}Object.defineProperties(g,{cleanWindow:{value:e},root:{value:t},namespaces:{value:new e.Set([c])},CustomInitSettings:{value:{}},DomainLimits:{value:{}},SleekNotes:{value:[]}}),Object.defineProperty(n,"sndefine",{value:g}),Object.defineProperty(n,"arequire",{value:function(t){return new e.Promise((n=>{!function(t,n){e.Promise.all(t.map(h)).then((e=>{n&&n.apply(this,e)}))}([t],(function(e){return n(e)}))}))}}),m=i}let v=Array.isArray(n[c])?n[c].pop():n[c];if(v)for(let[e,t]of Object.entries(v))"SleekNotes"==e?l.has("snpreview")||p(t):"object"==typeof t&&t?(n.sndefine[e]||(n.sndefine[e]={}),Object.assign(n.sndefine[e],t)):void 0!==t&&(n.sndefine[e]=t);function w(e){if("SleekNote"==e&&!l.has("snpreview")){let e=n.sndefine.HideSleeknoteBadge;if(void 0===e&&(e=!0),!e&&n.sndefine.CustomerId>=790)return!0}}function S(){return n.sndefine.DomainLimits}async function b(t,r,i,a,s){var o;n[c]&&!n[c].API&&(n[c].API=Promise.resolve(i),n[c].triggerOnClick=n[c].triggerOnclick=(...e)=>n[c].API.then((t=>t.call(t,"launch",...e)))),s.initialize(n.sndefine.namespaces),await a.add(n.sndefine.SleekNotes),o=c,n.arequire("package-tracker").then((function(t){e.trackPageView||t.trackPageView(o)&&(e.trackPageView=!0)})),await t(r.CORE.EVENTS.LOAD,{NS:c,command:function(){try{return i.apply(null,arguments)}catch(e){console.warn("Error calling API",e)}}})}f&&(m.global=e.Promise.resolve().then((()=>{const t=["fetch","FormData","setInterval","setTimeout","clearInterval","clearTimeout"];return new e.Proxy({},{get(n,r){let i=e[r];return t.includes(r)&&(i=i.bind(e)),i}})})),m["core-sleeknote"]=e.Promise.resolve().then((()=>{n.dev||(n.dev=Object.create(null));let e=Object.fromEntries(l.entries()),r={isSubscribedFromQuery:"true"==e.SNSubscribed||"drip"==e.utm_source&&"email"==e.utm_medium,debug:e.sndebug||e.sleeknote_debug&&"1"||"",reset:e.snreset,editor:e.sneditor,preview:e.snpreview,timestamp:"?"+(Number("{{sleekNotetimestamp}}")||""),getBase:()=>t+s,local:t.includes("local."),custom(e,t){var r=n.sndefine.CustomInitSettings[e];return r||t},hasCustomProp:e=>e in n.sndefine.CustomInitSettings,expose:(e,t)=>(n.dev[t]=e,e),hooks:{},eventName:"eve"+ +new Date,isDripURL:"SleekNote"!=c,needBadge:w(c),getDomainLimits:S};return r.preview&&(r.mergeId=void 0===e.snmergeid?0:e.snmergeid),r}))),f?n.arequire("package-core-boot").then((async function({launcher:e,coreConfig:n,emit:r,API:i,CONST:a,storage:o,B:l,siteData:c}){let u=this;await o.postCreate(),(n.local||n.reset)&&"n"!=n.reset&&await o.forceResetSession(n.reset),n.preview&&await u.Promise.all([import(t+s+"preview-utils.js"),import(t+s+"preview-toolbar.js")]).then((async function(e){let[{default:t},{default:r}]=e,i=await t.fetchHTMLConfig(n.preview);p(i),l.is.desktop&&r(i[0],n)})),function(){try{return u.location!==u.parent.location}catch(e){}}()&&u.parent.postMessage(u.JSON.stringify({fingerprint:"SleekNote",command:"core-loaded"}),"*"),b(r,a,i,e,c)})):n.arequire("package-core-boot").then((async function({launcher:e,coreConfig:t,emit:n,API:r,CONST:i,storage:a,B:s,siteData:o}){await a.postCreate(),t.needBadge=!1,b(n,i,r,e,o)}))}).call(this);